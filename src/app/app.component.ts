import { Component, ElementRef, HostListener, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';
import { Chart, registerables } from 'chart.js';
import annotationPlugin from 'chartjs-plugin-annotation';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss']
})
export class AppComponent implements OnInit, OnChanges {
  @ViewChild('ecgChartContainer', { static: false }) chartContainer!: ElementRef;

  public data: any[] = []

  public chart: Chart | undefined;

  private chartWidth: number | undefined;
  private chartHeight: number | undefined;

  private minElementsX: number = 0
  private maxElementsX: number = 8    //segundos

  private minElementsY: number = 0
  private maxElementsY: number = 4

  //grid lines colors

  private gridLineStrong: string = 'rgba(0, 0, 0, 0.8)'
  private gridLineMedium: string = 'rgba(0, 0, 0, 0.3)'
  private gridLineLight: string = 'rgba(0, 0, 0, 0.1)'

  @HostListener('window:resize', ['$event'])
  onResize(event: any) {
    let width = this.chartContainer.nativeElement.width
    let height = this.chartContainer.nativeElement.parentElement.parentElement.offsetHeight
    // this.chart.resize(width, height)
  }

  constructor() { }

  ngOnInit(): void {
    Promise.resolve(null).then(() => this.ngOnInitAsync())

    this.data = JSON.parse(`[{"x":0,"y":"1.50"},{"x":0.005,"y":"1.52"},{"x":0.01,"y":"1.55"},{"x":0.015,"y":"1.57"},{"x":0.02,"y":"1.60"},{"x":0.025,"y":"1.61"},{"x":0.03,"y":"1.61"},{"x":0.035,"y":"1.61"},{"x":0.04,"y":"1.59"},{"x":0.045,"y":"1.58"},{"x":0.05,"y":"1.57"},{"x":0.055,"y":"1.58"},{"x":0.06,"y":"1.60"},{"x":0.065,"y":"1.62"},{"x":0.07,"y":"1.64"},{"x":0.075,"y":"1.66"},{"x":0.08,"y":"1.66"},{"x":0.085,"y":"1.65"},{"x":0.09,"y":"1.64"},{"x":0.095,"y":"1.62"},{"x":0.1,"y":"1.61"},{"x":0.105,"y":"1.61"},{"x":0.11,"y":"1.62"},{"x":0.115,"y":"1.64"},{"x":0.12,"y":"1.66"},{"x":0.125,"y":"1.67"},{"x":0.13,"y":"1.68"},{"x":0.135,"y":"1.67"},{"x":0.14,"y":"1.65"},{"x":0.145,"y":"1.64"},{"x":0.15,"y":"1.62"},{"x":0.155,"y":"1.62"},{"x":0.16,"y":"1.63"},{"x":0.165,"y":"1.65"},{"x":0.17,"y":"1.67"},{"x":0.175,"y":"1.69"},{"x":0.18,"y":"1.69"},{"x":0.185,"y":"1.69"},{"x":0.19,"y":"1.67"},{"x":0.195,"y":"1.65"},{"x":0.2,"y":"1.63"},{"x":0.205,"y":"1.63"},{"x":0.21,"y":"1.63"},{"x":0.215,"y":"1.65"},{"x":0.22,"y":"1.67"},{"x":0.225,"y":"1.68"},{"x":0.23,"y":"1.69"},{"x":0.235,"y":"1.69"},{"x":0.24,"y":"1.67"},{"x":0.245,"y":"1.65"},{"x":0.25,"y":"1.63"},{"x":0.255,"y":"1.63"},{"x":0.26,"y":"1.63"},{"x":0.265,"y":"1.64"},{"x":0.27,"y":"1.66"},{"x":0.275,"y":"1.68"},{"x":0.28,"y":"1.68"},{"x":0.285,"y":"1.68"},{"x":0.29,"y":"1.67"},{"x":0.295,"y":"1.65"},{"x":0.3,"y":"1.63"},{"x":0.305,"y":"1.62"},{"x":0.31,"y":"1.62"},{"x":0.315,"y":"1.63"},{"x":0.32,"y":"1.65"},{"x":0.325,"y":"1.67"},{"x":0.33,"y":"1.68"},{"x":0.335,"y":"1.67"},{"x":0.34,"y":"1.66"},{"x":0.345,"y":"1.64"},{"x":0.35,"y":"1.62"},{"x":0.355,"y":"1.61"},{"x":0.36,"y":"1.61"},{"x":0.365,"y":"1.62"},{"x":0.37,"y":"1.63"},{"x":0.375,"y":"1.65"},{"x":0.38,"y":"1.66"},{"x":0.385,"y":"1.66"},{"x":0.39,"y":"1.65"},{"x":0.395,"y":"1.63"},{"x":0.4,"y":"1.61"},{"x":0.405,"y":"1.60"},{"x":0.41,"y":"1.60"},{"x":0.415,"y":"1.61"},{"x":0.42,"y":"1.63"},{"x":0.425,"y":"1.65"},{"x":0.43,"y":"1.66"},{"x":0.435,"y":"1.67"},{"x":0.44,"y":"1.66"},{"x":0.445,"y":"1.64"},{"x":0.45,"y":"1.62"},{"x":0.455,"y":"1.61"},{"x":0.46,"y":"1.60"},{"x":0.465,"y":"1.61"},{"x":0.47,"y":"1.62"},{"x":0.475,"y":"1.63"},{"x":0.48,"y":"1.65"},{"x":0.485,"y":"1.65"},{"x":0.49,"y":"1.63"},{"x":0.495,"y":"1.61"},{"x":0.5,"y":"1.59"},{"x":0.505,"y":"1.57"},{"x":0.51,"y":"1.55"},{"x":0.515,"y":"1.56"},{"x":0.52,"y":"1.57"},{"x":0.525,"y":"1.58"},{"x":0.53,"y":"1.60"},{"x":0.535,"y":"1.61"},{"x":0.54,"y":"1.60"},{"x":0.545,"y":"1.59"},{"x":0.55,"y":"1.57"},{"x":0.555,"y":"1.55"},{"x":0.56,"y":"1.53"},{"x":0.565,"y":"1.53"},{"x":0.57,"y":"1.54"},{"x":0.575,"y":"1.56"},{"x":0.58,"y":"1.58"},{"x":0.585,"y":"1.59"},{"x":0.59,"y":"1.60"},{"x":0.595,"y":"1.59"},{"x":0.6,"y":"1.58"},{"x":0.605,"y":"1.56"},{"x":0.61,"y":"1.54"},{"x":0.615,"y":"1.51"},{"x":0.62,"y":"1.47"},{"x":0.625,"y":"1.43"},{"x":0.63,"y":"1.38"},{"x":0.635,"y":"1.35"},{"x":0.64,"y":"1.35"},{"x":0.645,"y":"1.40"},{"x":0.65,"y":"1.54"},{"x":0.655,"y":"1.75"},{"x":0.66,"y":"2.02"},{"x":0.665,"y":"2.32"},{"x":0.67,"y":"2.59"},{"x":0.675,"y":"2.78"},{"x":0.68,"y":"2.83"},{"x":0.685,"y":"2.74"},{"x":0.69,"y":"2.51"},{"x":0.695,"y":"2.19"},{"x":0.7,"y":"1.84"},{"x":0.705,"y":"1.54"},{"x":0.71,"y":"1.33"},{"x":0.715,"y":"1.24"},{"x":0.72,"y":"1.24"},{"x":0.725,"y":"1.30"},{"x":0.73,"y":"1.38"},{"x":0.735,"y":"1.45"},{"x":0.74,"y":"1.49"},{"x":0.745,"y":"1.50"},{"x":0.75,"y":"1.48"},{"x":0.755,"y":"1.45"},{"x":0.76,"y":"1.43"},{"x":0.765,"y":"1.42"},{"x":0.77,"y":"1.42"},{"x":0.775,"y":"1.44"},{"x":0.78,"y":"1.46"},{"x":0.785,"y":"1.49"},{"x":0.79,"y":"1.50"},{"x":0.795,"y":"1.51"},{"x":0.8,"y":"1.50"},{"x":0.805,"y":"1.48"},{"x":0.81,"y":"1.47"},{"x":0.815,"y":"1.47"},{"x":0.82,"y":"1.47"},{"x":0.825,"y":"1.49"},{"x":0.83,"y":"1.52"},{"x":0.835,"y":"1.54"},{"x":0.84,"y":"1.56"},{"x":0.845,"y":"1.57"},{"x":0.85,"y":"1.56"},{"x":0.855,"y":"1.55"},{"x":0.86,"y":"1.54"},{"x":0.865,"y":"1.53"},{"x":0.87,"y":"1.54"},{"x":0.875,"y":"1.56"},{"x":0.88,"y":"1.58"},{"x":0.885,"y":"1.61"},{"x":0.89,"y":"1.63"},{"x":0.895,"y":"1.64"},{"x":0.9,"y":"1.65"},{"x":0.905,"y":"1.64"},{"x":0.91,"y":"1.64"},{"x":0.915,"y":"1.64"},{"x":0.92,"y":"1.65"},{"x":0.925,"y":"1.68"},{"x":0.93,"y":"1.72"},{"x":0.935,"y":"1.75"},{"x":0.94,"y":"1.78"},{"x":0.945,"y":"1.81"},{"x":0.95,"y":"1.82"},{"x":0.955,"y":"1.82"},{"x":0.96,"y":"1.81"},{"x":0.965,"y":"1.81"},{"x":0.97,"y":"1.81"},{"x":0.975,"y":"1.83"},{"x":0.98,"y":"1.85"},{"x":0.985,"y":"1.87"},{"x":0.99,"y":"1.89"},{"x":0.995,"y":"1.90"},{"x":1,"y":"1.87"},{"x":1.005,"y":"1.82"},{"x":1.01,"y":"1.77"},{"x":1.015,"y":"1.72"},{"x":1.02,"y":"1.68"},{"x":1.025,"y":"1.65"},{"x":1.03,"y":"1.64"},{"x":1.035,"y":"1.63"},{"x":1.04,"y":"1.62"},{"x":1.045,"y":"1.61"},{"x":1.05,"y":"1.59"},{"x":1.055,"y":"1.56"},{"x":1.06,"y":"1.53"},{"x":1.065,"y":"1.51"},{"x":1.07,"y":"1.50"},{"x":1.075,"y":"1.50"},{"x":1.08,"y":"1.51"},{"x":1.085,"y":"1.53"},{"x":1.09,"y":"1.55"},{"x":1.095,"y":"1.57"},{"x":1.1,"y":"1.58"},{"x":1.105,"y":"1.57"},{"x":1.11,"y":"1.56"},{"x":1.115,"y":"1.54"},{"x":1.12,"y":"1.54"},{"x":1.125,"y":"1.54"},{"x":1.13,"y":"1.56"},{"x":1.135,"y":"1.58"},{"x":1.14,"y":"1.60"},{"x":1.145,"y":"1.62"},{"x":1.15,"y":"1.62"},{"x":1.155,"y":"1.61"},{"x":1.16,"y":"1.60"},{"x":1.165,"y":"1.59"},{"x":1.17,"y":"1.58"},{"x":1.175,"y":"1.58"},{"x":1.18,"y":"1.59"},{"x":1.185,"y":"1.61"},{"x":1.19,"y":"1.63"},{"x":1.195,"y":"1.65"},{"x":1.2,"y":"1.66"},{"x":1.205,"y":"1.65"},{"x":1.21,"y":"1.64"},{"x":1.215,"y":"1.62"},{"x":1.22,"y":"1.61"},{"x":1.225,"y":"1.60"},{"x":1.23,"y":"1.61"},{"x":1.235,"y":"1.63"},{"x":1.24,"y":"1.65"},{"x":1.245,"y":"1.67"},{"x":1.25,"y":"1.68"},{"x":1.255,"y":"1.67"},{"x":1.26,"y":"1.66"},{"x":1.265,"y":"1.64"},{"x":1.27,"y":"1.63"},{"x":1.275,"y":"1.62"},{"x":1.28,"y":"1.63"},{"x":1.285,"y":"1.64"},{"x":1.29,"y":"1.66"},{"x":1.295,"y":"1.68"},{"x":1.3,"y":"1.69"},{"x":1.305,"y":"1.69"},{"x":1.31,"y":"1.67"},{"x":1.315,"y":"1.65"},{"x":1.32,"y":"1.63"},{"x":1.325,"y":"1.62"},{"x":1.33,"y":"1.62"},{"x":1.335,"y":"1.63"},{"x":1.34,"y":"1.65"},{"x":1.345,"y":"1.67"},{"x":1.35,"y":"1.68"},{"x":1.355,"y":"1.68"},{"x":1.36,"y":"1.67"},{"x":1.365,"y":"1.65"},{"x":1.37,"y":"1.63"},{"x":1.375,"y":"1.62"},{"x":1.38,"y":"1.62"},{"x":1.385,"y":"1.63"},{"x":1.39,"y":"1.65"},{"x":1.395,"y":"1.67"},{"x":1.4,"y":"1.68"},{"x":1.405,"y":"1.68"},{"x":1.41,"y":"1.67"},{"x":1.415,"y":"1.65"},{"x":1.42,"y":"1.63"},{"x":1.425,"y":"1.62"},{"x":1.43,"y":"1.61"},{"x":1.435,"y":"1.62"},{"x":1.44,"y":"1.64"},{"x":1.445,"y":"1.66"},{"x":1.45,"y":"1.67"},{"x":1.455,"y":"1.68"},{"x":1.46,"y":"1.67"},{"x":1.465,"y":"1.65"},{"x":1.47,"y":"1.63"},{"x":1.475,"y":"1.62"},{"x":1.48,"y":"1.61"},{"x":1.485,"y":"1.62"},{"x":1.49,"y":"1.63"},{"x":1.495,"y":"1.65"},{"x":1.5,"y":"1.66"},{"x":1.505,"y":"1.67"},{"x":1.51,"y":"1.66"},{"x":1.515,"y":"1.64"},{"x":1.52,"y":"1.62"},{"x":1.525,"y":"1.61"},{"x":1.53,"y":"1.60"},{"x":1.535,"y":"1.60"},{"x":1.54,"y":"1.62"},{"x":1.545,"y":"1.64"},{"x":1.55,"y":"1.66"},{"x":1.555,"y":"1.67"},{"x":1.56,"y":"1.66"},{"x":1.565,"y":"1.65"},{"x":1.57,"y":"1.63"},{"x":1.575,"y":"1.62"},{"x":1.58,"y":"1.61"},{"x":1.585,"y":"1.61"},{"x":1.59,"y":"1.62"},{"x":1.595,"y":"1.64"},{"x":1.6,"y":"1.65"},{"x":1.605,"y":"1.66"},{"x":1.61,"y":"1.65"},{"x":1.615,"y":"1.63"},{"x":1.62,"y":"1.61"},{"x":1.625,"y":"1.59"},{"x":1.63,"y":"1.57"},{"x":1.635,"y":"1.57"},{"x":1.64,"y":"1.58"},{"x":1.645,"y":"1.59"},{"x":1.65,"y":"1.60"},{"x":1.655,"y":"1.61"},{"x":1.66,"y":"1.61"},{"x":1.665,"y":"1.59"},{"x":1.67,"y":"1.57"},{"x":1.675,"y":"1.55"},{"x":1.68,"y":"1.54"},{"x":1.685,"y":"1.53"},{"x":1.69,"y":"1.54"},{"x":1.695,"y":"1.56"},{"x":1.7,"y":"1.57"},{"x":1.705,"y":"1.59"},{"x":1.71,"y":"1.60"},{"x":1.715,"y":"1.59"},{"x":1.72,"y":"1.58"},{"x":1.725,"y":"1.56"},{"x":1.73,"y":"1.54"},{"x":1.735,"y":"1.52"},{"x":1.74,"y":"1.48"},{"x":1.745,"y":"1.45"},{"x":1.75,"y":"1.40"},{"x":1.755,"y":"1.37"},{"x":1.76,"y":"1.35"},{"x":1.765,"y":"1.39"},{"x":1.77,"y":"1.49"},{"x":1.775,"y":"1.67"},{"x":1.78,"y":"1.93"},{"x":1.785,"y":"2.22"},{"x":1.79,"y":"2.50"},{"x":1.795,"y":"2.72"},{"x":1.8,"y":"2.81"},{"x":1.805,"y":"2.75"},{"x":1.81,"y":"2.55"},{"x":1.815,"y":"2.24"},{"x":1.82,"y":"1.89"},{"x":1.825,"y":"1.57"},{"x":1.83,"y":"1.33"},{"x":1.835,"y":"1.21"},{"x":1.84,"y":"1.19"},{"x":1.845,"y":"1.25"},{"x":1.85,"y":"1.35"},{"x":1.855,"y":"1.44"},{"x":1.86,"y":"1.50"},{"x":1.865,"y":"1.52"},{"x":1.87,"y":"1.51"},{"x":1.875,"y":"1.48"},{"x":1.88,"y":"1.46"},{"x":1.885,"y":"1.44"},{"x":1.89,"y":"1.44"},{"x":1.895,"y":"1.45"},{"x":1.9,"y":"1.47"},{"x":1.905,"y":"1.50"},{"x":1.91,"y":"1.52"},{"x":1.915,"y":"1.52"},{"x":1.92,"y":"1.52"},{"x":1.925,"y":"1.50"},{"x":1.93,"y":"1.49"},{"x":1.935,"y":"1.48"},{"x":1.94,"y":"1.48"},{"x":1.945,"y":"1.49"},{"x":1.95,"y":"1.51"},{"x":1.955,"y":"1.54"},{"x":1.96,"y":"1.56"},{"x":1.965,"y":"1.57"},{"x":1.97,"y":"1.56"},{"x":1.975,"y":"1.55"},{"x":1.98,"y":"1.54"},{"x":1.985,"y":"1.53"},{"x":1.99,"y":"1.52"},{"x":1.995,"y":"1.54"},{"x":2,"y":"1.57"},{"x":2.005,"y":"1.61"},{"x":2.01,"y":"1.63"},{"x":2.015,"y":"1.65"},{"x":2.02,"y":"1.65"},{"x":2.025,"y":"1.65"},{"x":2.03,"y":"1.65"},{"x":2.035,"y":"1.65"},{"x":2.04,"y":"1.66"},{"x":2.045,"y":"1.68"},{"x":2.05,"y":"1.71"},{"x":2.055,"y":"1.75"},{"x":2.06,"y":"1.78"},{"x":2.065,"y":"1.81"},{"x":2.07,"y":"1.82"},{"x":2.075,"y":"1.82"},{"x":2.08,"y":"1.82"},{"x":2.085,"y":"1.81"},{"x":2.09,"y":"1.81"},{"x":2.095,"y":"1.82"},{"x":2.1,"y":"1.84"},{"x":2.105,"y":"1.86"},{"x":2.11,"y":"1.88"},{"x":2.115,"y":"1.88"},{"x":2.12,"y":"1.86"},{"x":2.125,"y":"1.82"},{"x":2.13,"y":"1.78"},{"x":2.135,"y":"1.73"},{"x":2.14,"y":"1.68"},{"x":2.145,"y":"1.65"},{"x":2.15,"y":"1.63"},{"x":2.155,"y":"1.62"},{"x":2.16,"y":"1.61"},{"x":2.165,"y":"1.60"},{"x":2.17,"y":"1.59"},{"x":2.175,"y":"1.57"},{"x":2.18,"y":"1.54"},{"x":2.185,"y":"1.51"},{"x":2.19,"y":"1.50"},{"x":2.195,"y":"1.50"},{"x":2.2,"y":"1.51"},{"x":2.205,"y":"1.53"},{"x":2.21,"y":"1.55"},{"x":2.215,"y":"1.57"},{"x":2.22,"y":"1.57"},{"x":2.225,"y":"1.57"},{"x":2.23,"y":"1.56"},{"x":2.235,"y":"1.54"},{"x":2.24,"y":"1.53"},{"x":2.245,"y":"1.53"},{"x":2.25,"y":"1.55"},{"x":2.255,"y":"1.57"},{"x":2.26,"y":"1.60"},{"x":2.265,"y":"1.62"},{"x":2.27,"y":"1.63"},{"x":2.275,"y":"1.62"},{"x":2.28,"y":"1.61"},{"x":2.285,"y":"1.59"},{"x":2.29,"y":"1.58"},{"x":2.295,"y":"1.57"},{"x":2.3,"y":"1.58"},{"x":2.305,"y":"1.60"},{"x":2.31,"y":"1.62"},{"x":2.315,"y":"1.64"},{"x":2.32,"y":"1.65"},{"x":2.325,"y":"1.65"},{"x":2.33,"y":"1.64"},{"x":2.335,"y":"1.62"},{"x":2.34,"y":"1.61"},{"x":2.345,"y":"1.60"},{"x":2.35,"y":"1.61"},{"x":2.355,"y":"1.62"},{"x":2.36,"y":"1.65"},{"x":2.365,"y":"1.67"},{"x":2.37,"y":"1.68"},{"x":2.375,"y":"1.68"},{"x":2.38,"y":"1.68"},{"x":2.385,"y":"1.66"},{"x":2.39,"y":"1.64"},{"x":2.395,"y":"1.63"},{"x":2.4,"y":"1.63"},{"x":2.405,"y":"1.65"},{"x":2.41,"y":"1.67"},{"x":2.415,"y":"1.68"},{"x":2.42,"y":"1.70"},{"x":2.425,"y":"1.70"},{"x":2.43,"y":"1.69"},{"x":2.435,"y":"1.67"},{"x":2.44,"y":"1.65"},{"x":2.445,"y":"1.64"},{"x":2.45,"y":"1.63"},{"x":2.455,"y":"1.64"},{"x":2.46,"y":"1.65"},{"x":2.465,"y":"1.67"},{"x":2.47,"y":"1.68"},{"x":2.475,"y":"1.68"},{"x":2.48,"y":"1.67"},{"x":2.485,"y":"1.66"},{"x":2.49,"y":"1.64"},{"x":2.495,"y":"1.62"},{"x":2.5,"y":"1.61"},{"x":2.505,"y":"1.62"},{"x":2.51,"y":"1.63"},{"x":2.515,"y":"1.65"},{"x":2.52,"y":"1.66"},{"x":2.525,"y":"1.67"},{"x":2.53,"y":"1.66"},{"x":2.535,"y":"1.65"},{"x":2.54,"y":"1.63"},{"x":2.545,"y":"1.61"},{"x":2.55,"y":"1.60"},{"x":2.555,"y":"1.61"},{"x":2.56,"y":"1.63"},{"x":2.565,"y":"1.65"},{"x":2.57,"y":"1.66"},{"x":2.575,"y":"1.67"},{"x":2.58,"y":"1.67"},{"x":2.585,"y":"1.66"},{"x":2.59,"y":"1.64"},{"x":2.595,"y":"1.62"},{"x":2.6,"y":"1.61"},{"x":2.605,"y":"1.61"},{"x":2.61,"y":"1.62"},{"x":2.615,"y":"1.64"},{"x":2.62,"y":"1.66"},{"x":2.625,"y":"1.67"},{"x":2.63,"y":"1.67"},{"x":2.635,"y":"1.66"},{"x":2.64,"y":"1.65"},{"x":2.645,"y":"1.63"},{"x":2.65,"y":"1.62"},{"x":2.655,"y":"1.61"},{"x":2.66,"y":"1.62"},{"x":2.665,"y":"1.64"},{"x":2.67,"y":"1.66"},{"x":2.675,"y":"1.67"},{"x":2.68,"y":"1.67"},{"x":2.685,"y":"1.66"},{"x":2.69,"y":"1.64"},{"x":2.695,"y":"1.61"},{"x":2.7,"y":"1.60"},{"x":2.705,"y":"1.59"},{"x":2.71,"y":"1.59"},{"x":2.715,"y":"1.60"},{"x":2.72,"y":"1.61"},{"x":2.725,"y":"1.62"},{"x":2.73,"y":"1.62"},{"x":2.735,"y":"1.61"},{"x":2.74,"y":"1.59"},{"x":2.745,"y":"1.56"},{"x":2.75,"y":"1.54"},{"x":2.755,"y":"1.54"},{"x":2.76,"y":"1.54"},{"x":2.765,"y":"1.55"},{"x":2.77,"y":"1.57"},{"x":2.775,"y":"1.59"},{"x":2.78,"y":"1.59"},{"x":2.785,"y":"1.58"},{"x":2.79,"y":"1.57"},{"x":2.795,"y":"1.55"},{"x":2.8,"y":"1.53"},{"x":2.805,"y":"1.53"},{"x":2.81,"y":"1.54"},{"x":2.815,"y":"1.56"},{"x":2.82,"y":"1.58"},{"x":2.825,"y":"1.59"},{"x":2.83,"y":"1.58"},{"x":2.835,"y":"1.53"},{"x":2.84,"y":"1.46"},{"x":2.845,"y":"1.38"},{"x":2.85,"y":"1.31"},{"x":2.855,"y":"1.28"},{"x":2.86,"y":"1.32"},{"x":2.865,"y":"1.46"},{"x":2.87,"y":"1.68"},{"x":2.875,"y":"1.97"},{"x":2.88,"y":"2.29"},{"x":2.885,"y":"2.57"},{"x":2.89,"y":"2.76"},{"x":2.895,"y":"2.82"},{"x":2.9,"y":"2.73"},{"x":2.905,"y":"2.50"},{"x":2.91,"y":"2.19"},{"x":2.915,"y":"1.87"},{"x":2.92,"y":"1.58"},{"x":2.925,"y":"1.38"},{"x":2.93,"y":"1.29"},{"x":2.935,"y":"1.27"},{"x":2.94,"y":"1.31"},{"x":2.945,"y":"1.36"},{"x":2.95,"y":"1.41"},{"x":2.955,"y":"1.44"},{"x":2.96,"y":"1.45"},{"x":2.965,"y":"1.46"},{"x":2.97,"y":"1.47"},{"x":2.975,"y":"1.48"},{"x":2.98,"y":"1.49"},{"x":2.985,"y":"1.49"},{"x":2.99,"y":"1.49"},{"x":2.995,"y":"1.48"},{"x":3,"y":"1.46"},{"x":3.005,"y":"1.45"},{"x":3.01,"y":"1.46"},{"x":3.015,"y":"1.47"},{"x":3.02,"y":"1.49"},{"x":3.025,"y":"1.51"},{"x":3.03,"y":"1.53"},{"x":3.035,"y":"1.54"},{"x":3.04,"y":"1.54"},{"x":3.045,"y":"1.53"},{"x":3.05,"y":"1.52"},{"x":3.055,"y":"1.51"},{"x":3.06,"y":"1.51"},{"x":3.065,"y":"1.52"},{"x":3.07,"y":"1.54"},{"x":3.075,"y":"1.56"},{"x":3.08,"y":"1.59"},{"x":3.085,"y":"1.60"},{"x":3.09,"y":"1.61"},{"x":3.095,"y":"1.60"},{"x":3.1,"y":"1.59"},{"x":3.105,"y":"1.59"},{"x":3.11,"y":"1.59"},{"x":3.115,"y":"1.60"},{"x":3.12,"y":"1.63"},{"x":3.125,"y":"1.66"},{"x":3.13,"y":"1.69"},{"x":3.135,"y":"1.71"},{"x":3.14,"y":"1.73"},{"x":3.145,"y":"1.74"},{"x":3.15,"y":"1.74"},{"x":3.155,"y":"1.74"},{"x":3.16,"y":"1.74"},{"x":3.165,"y":"1.76"},{"x":3.17,"y":"1.79"},{"x":3.175,"y":"1.82"},{"x":3.18,"y":"1.85"},{"x":3.185,"y":"1.88"},{"x":3.19,"y":"1.88"},{"x":3.195,"y":"1.88"},{"x":3.2,"y":"1.86"},{"x":3.205,"y":"1.83"},{"x":3.21,"y":"1.81"},{"x":3.215,"y":"1.79"},{"x":3.22,"y":"1.78"},{"x":3.225,"y":"1.77"},{"x":3.23,"y":"1.76"},{"x":3.235,"y":"1.75"},{"x":3.24,"y":"1.72"},{"x":3.245,"y":"1.69"},{"x":3.25,"y":"1.64"},{"x":3.255,"y":"1.59"},{"x":3.26,"y":"1.56"},{"x":3.265,"y":"1.53"},{"x":3.27,"y":"1.52"},{"x":3.275,"y":"1.53"},{"x":3.28,"y":"1.54"},{"x":3.285,"y":"1.55"},{"x":3.29,"y":"1.56"},{"x":3.295,"y":"1.55"},{"x":3.3,"y":"1.54"},{"x":3.305,"y":"1.53"},{"x":3.31,"y":"1.51"},{"x":3.315,"y":"1.51"},{"x":3.32,"y":"1.52"},{"x":3.325,"y":"1.54"},{"x":3.33,"y":"1.56"},{"x":3.335,"y":"1.58"},{"x":3.34,"y":"1.60"},{"x":3.345,"y":"1.60"},{"x":3.35,"y":"1.59"},{"x":3.355,"y":"1.58"},{"x":3.36,"y":"1.56"},{"x":3.365,"y":"1.55"},{"x":3.37,"y":"1.56"},{"x":3.375,"y":"1.57"},{"x":3.38,"y":"1.59"},{"x":3.385,"y":"1.61"},{"x":3.39,"y":"1.62"},{"x":3.395,"y":"1.63"},{"x":3.4,"y":"1.62"},{"x":3.405,"y":"1.60"},{"x":3.41,"y":"1.59"},{"x":3.415,"y":"1.58"},{"x":3.42,"y":"1.58"},{"x":3.425,"y":"1.60"},{"x":3.43,"y":"1.62"},{"x":3.435,"y":"1.64"},{"x":3.44,"y":"1.66"},{"x":3.445,"y":"1.66"},{"x":3.45,"y":"1.66"},{"x":3.455,"y":"1.64"},{"x":3.46,"y":"1.63"},{"x":3.465,"y":"1.62"},{"x":3.47,"y":"1.63"},{"x":3.475,"y":"1.64"},{"x":3.48,"y":"1.66"},{"x":3.485,"y":"1.68"},{"x":3.49,"y":"1.70"},{"x":3.495,"y":"1.70"},{"x":3.5,"y":"1.69"},{"x":3.505,"y":"1.68"},{"x":3.51,"y":"1.66"},{"x":3.515,"y":"1.65"},{"x":3.52,"y":"1.64"},{"x":3.525,"y":"1.65"},{"x":3.53,"y":"1.66"},{"x":3.535,"y":"1.68"},{"x":3.54,"y":"1.69"},{"x":3.545,"y":"1.69"},{"x":3.55,"y":"1.69"},{"x":3.555,"y":"1.67"},{"x":3.56,"y":"1.65"},{"x":3.565,"y":"1.63"},{"x":3.57,"y":"1.62"},{"x":3.575,"y":"1.63"},{"x":3.58,"y":"1.64"},{"x":3.585,"y":"1.66"},{"x":3.59,"y":"1.67"},{"x":3.595,"y":"1.68"},{"x":3.6,"y":"1.67"},{"x":3.605,"y":"1.66"},{"x":3.61,"y":"1.64"},{"x":3.615,"y":"1.62"},{"x":3.62,"y":"1.61"},{"x":3.625,"y":"1.62"},{"x":3.63,"y":"1.63"},{"x":3.635,"y":"1.65"},{"x":3.64,"y":"1.66"},{"x":3.645,"y":"1.67"},{"x":3.65,"y":"1.67"},{"x":3.655,"y":"1.66"},{"x":3.66,"y":"1.64"},{"x":3.665,"y":"1.62"},{"x":3.67,"y":"1.61"},{"x":3.675,"y":"1.61"},{"x":3.68,"y":"1.62"},{"x":3.685,"y":"1.64"},{"x":3.69,"y":"1.65"},{"x":3.695,"y":"1.67"},{"x":3.7,"y":"1.67"},{"x":3.705,"y":"1.65"},{"x":3.71,"y":"1.64"},{"x":3.715,"y":"1.62"},{"x":3.72,"y":"1.61"},{"x":3.725,"y":"1.61"},{"x":3.73,"y":"1.62"},{"x":3.735,"y":"1.63"},{"x":3.74,"y":"1.65"},{"x":3.745,"y":"1.66"},{"x":3.75,"y":"1.67"},{"x":3.755,"y":"1.66"},{"x":3.76,"y":"1.64"},{"x":3.765,"y":"1.62"},{"x":3.77,"y":"1.61"},{"x":3.775,"y":"1.60"},{"x":3.78,"y":"1.61"},{"x":3.785,"y":"1.63"},{"x":3.79,"y":"1.65"},{"x":3.795,"y":"1.66"},{"x":3.8,"y":"1.67"},{"x":3.805,"y":"1.67"},{"x":3.81,"y":"1.65"},{"x":3.815,"y":"1.64"},{"x":3.82,"y":"1.62"},{"x":3.825,"y":"1.61"},{"x":3.83,"y":"1.61"},{"x":3.835,"y":"1.62"},{"x":3.84,"y":"1.64"},{"x":3.845,"y":"1.65"},{"x":3.85,"y":"1.65"},{"x":3.855,"y":"1.64"},{"x":3.86,"y":"1.62"},{"x":3.865,"y":"1.59"},{"x":3.87,"y":"1.57"},{"x":3.875,"y":"1.56"},{"x":3.88,"y":"1.56"},{"x":3.885,"y":"1.57"},{"x":3.89,"y":"1.58"},{"x":3.895,"y":"1.60"},{"x":3.9,"y":"1.60"},{"x":3.905,"y":"1.60"},{"x":3.91,"y":"1.58"},{"x":3.915,"y":"1.56"},{"x":3.92,"y":"1.53"},{"x":3.925,"y":"1.52"},{"x":3.93,"y":"1.52"},{"x":3.935,"y":"1.53"},{"x":3.94,"y":"1.55"},{"x":3.945,"y":"1.57"},{"x":3.95,"y":"1.59"},{"x":3.955,"y":"1.59"},{"x":3.96,"y":"1.57"},{"x":3.965,"y":"1.52"},{"x":3.97,"y":"1.46"},{"x":3.975,"y":"1.39"},{"x":3.98,"y":"1.32"},{"x":3.985,"y":"1.28"},{"x":3.99,"y":"1.23"},{"x":3.995,"y":"1.26"},{"x":4,"y":"1.42"},{"x":4.005,"y":"1.71"},{"x":4.01,"y":"2.05"},{"x":4.015,"y":"2.36"},{"x":4.02,"y":"2.63"},{"x":4.025,"y":"2.80"},{"x":4.03,"y":"2.85"},{"x":4.035,"y":"2.74"},{"x":4.04,"y":"2.51"},{"x":4.045,"y":"2.19"},{"x":4.05,"y":"1.86"},{"x":4.055,"y":"1.57"},{"x":4.06,"y":"1.36"},{"x":4.065,"y":"1.25"},{"x":4.07,"y":"1.22"},{"x":4.075,"y":"1.26"},{"x":4.08,"y":"1.32"},{"x":4.085,"y":"1.39"},{"x":4.09,"y":"1.45"},{"x":4.095,"y":"1.48"},{"x":4.1,"y":"1.50"},{"x":4.105,"y":"1.49"},{"x":4.11,"y":"1.48"},{"x":4.115,"y":"1.46"},{"x":4.12,"y":"1.44"},{"x":4.125,"y":"1.43"},{"x":4.13,"y":"1.42"},{"x":4.135,"y":"1.43"},{"x":4.14,"y":"1.45"},{"x":4.145,"y":"1.48"},{"x":4.15,"y":"1.50"},{"x":4.155,"y":"1.51"},{"x":4.16,"y":"1.52"},{"x":4.165,"y":"1.51"},{"x":4.17,"y":"1.50"},{"x":4.175,"y":"1.49"},{"x":4.18,"y":"1.49"},{"x":4.185,"y":"1.49"},{"x":4.19,"y":"1.51"},{"x":4.195,"y":"1.53"},{"x":4.2,"y":"1.55"},{"x":4.205,"y":"1.57"},{"x":4.21,"y":"1.58"},{"x":4.215,"y":"1.57"},{"x":4.22,"y":"1.56"},{"x":4.225,"y":"1.55"},{"x":4.23,"y":"1.55"},{"x":4.235,"y":"1.55"},{"x":4.24,"y":"1.57"},{"x":4.245,"y":"1.60"},{"x":4.25,"y":"1.63"},{"x":4.255,"y":"1.66"},{"x":4.26,"y":"1.69"},{"x":4.265,"y":"1.70"},{"x":4.27,"y":"1.71"},{"x":4.275,"y":"1.71"},{"x":4.28,"y":"1.72"},{"x":4.285,"y":"1.75"},{"x":4.29,"y":"1.77"},{"x":4.295,"y":"1.81"},{"x":4.3,"y":"1.85"},{"x":4.305,"y":"1.87"},{"x":4.31,"y":"1.89"},{"x":4.315,"y":"1.89"},{"x":4.32,"y":"1.88"},{"x":4.325,"y":"1.87"},{"x":4.33,"y":"1.86"},{"x":4.335,"y":"1.85"},{"x":4.34,"y":"1.85"},{"x":4.345,"y":"1.85"},{"x":4.35,"y":"1.85"},{"x":4.355,"y":"1.84"},{"x":4.36,"y":"1.82"},{"x":4.365,"y":"1.78"},{"x":4.37,"y":"1.74"},{"x":4.375,"y":"1.69"},{"x":4.38,"y":"1.64"},{"x":4.385,"y":"1.60"},{"x":4.39,"y":"1.58"},{"x":4.395,"y":"1.57"},{"x":4.4,"y":"1.57"},{"x":4.405,"y":"1.57"},{"x":4.41,"y":"1.57"},{"x":4.415,"y":"1.55"},{"x":4.42,"y":"1.53"},{"x":4.425,"y":"1.50"},{"x":4.43,"y":"1.48"},{"x":4.435,"y":"1.47"},{"x":4.44,"y":"1.47"},{"x":4.445,"y":"1.49"},{"x":4.45,"y":"1.51"},{"x":4.455,"y":"1.54"},{"x":4.46,"y":"1.56"},{"x":4.465,"y":"1.57"},{"x":4.47,"y":"1.57"},{"x":4.475,"y":"1.55"},{"x":4.48,"y":"1.54"},{"x":4.485,"y":"1.53"},{"x":4.49,"y":"1.54"},{"x":4.495,"y":"1.55"},{"x":4.5,"y":"1.58"},{"x":4.505,"y":"1.60"},{"x":4.51,"y":"1.62"},{"x":4.515,"y":"1.63"},{"x":4.52,"y":"1.62"},{"x":4.525,"y":"1.61"},{"x":4.53,"y":"1.59"},{"x":4.535,"y":"1.58"},{"x":4.54,"y":"1.58"},{"x":4.545,"y":"1.59"},{"x":4.55,"y":"1.61"},{"x":4.555,"y":"1.63"},{"x":4.56,"y":"1.65"},{"x":4.565,"y":"1.66"},{"x":4.57,"y":"1.66"},{"x":4.575,"y":"1.64"},{"x":4.58,"y":"1.63"},{"x":4.585,"y":"1.61"},{"x":4.59,"y":"1.61"},{"x":4.595,"y":"1.62"},{"x":4.6,"y":"1.64"},{"x":4.605,"y":"1.66"},{"x":4.61,"y":"1.68"},{"x":4.615,"y":"1.68"},{"x":4.62,"y":"1.68"},{"x":4.625,"y":"1.67"},{"x":4.63,"y":"1.65"},{"x":4.635,"y":"1.63"},{"x":4.64,"y":"1.62"},{"x":4.645,"y":"1.63"},{"x":4.65,"y":"1.64"},{"x":4.655,"y":"1.66"},{"x":4.66,"y":"1.68"},{"x":4.665,"y":"1.68"},{"x":4.67,"y":"1.68"},{"x":4.675,"y":"1.67"},{"x":4.68,"y":"1.65"},{"x":4.685,"y":"1.63"},{"x":4.69,"y":"1.62"},{"x":4.695,"y":"1.62"},{"x":4.7,"y":"1.63"},{"x":4.705,"y":"1.65"},{"x":4.71,"y":"1.66"},{"x":4.715,"y":"1.67"},{"x":4.72,"y":"1.67"},{"x":4.725,"y":"1.66"},{"x":4.73,"y":"1.64"},{"x":4.735,"y":"1.63"},{"x":4.74,"y":"1.62"},{"x":4.745,"y":"1.62"},{"x":4.75,"y":"1.63"},{"x":4.755,"y":"1.65"},{"x":4.76,"y":"1.67"},{"x":4.765,"y":"1.69"},{"x":4.77,"y":"1.69"},{"x":4.775,"y":"1.68"},{"x":4.78,"y":"1.67"},{"x":4.785,"y":"1.65"},{"x":4.79,"y":"1.63"},{"x":4.795,"y":"1.63"},{"x":4.8,"y":"1.63"},{"x":4.805,"y":"1.65"},{"x":4.81,"y":"1.67"},{"x":4.815,"y":"1.68"},{"x":4.82,"y":"1.68"},{"x":4.825,"y":"1.67"},{"x":4.83,"y":"1.66"},{"x":4.835,"y":"1.64"},{"x":4.84,"y":"1.62"},{"x":4.845,"y":"1.61"},{"x":4.85,"y":"1.62"},{"x":4.855,"y":"1.63"},{"x":4.86,"y":"1.65"},{"x":4.865,"y":"1.66"},{"x":4.87,"y":"1.67"},{"x":4.875,"y":"1.67"},{"x":4.88,"y":"1.65"},{"x":4.885,"y":"1.63"},{"x":4.89,"y":"1.62"},{"x":4.895,"y":"1.61"},{"x":4.9,"y":"1.62"},{"x":4.905,"y":"1.63"},{"x":4.91,"y":"1.65"},{"x":4.915,"y":"1.67"},{"x":4.92,"y":"1.68"},{"x":4.925,"y":"1.67"},{"x":4.93,"y":"1.65"},{"x":4.935,"y":"1.63"},{"x":4.94,"y":"1.61"},{"x":4.945,"y":"1.59"},{"x":4.95,"y":"1.58"},{"x":4.955,"y":"1.59"},{"x":4.96,"y":"1.60"},{"x":4.965,"y":"1.61"},{"x":4.97,"y":"1.62"},{"x":4.975,"y":"1.61"},{"x":4.98,"y":"1.60"},{"x":4.985,"y":"1.58"},{"x":4.99,"y":"1.55"},{"x":4.995,"y":"1.53"},{"x":5,"y":"1.52"},{"x":5.005,"y":"1.54"},{"x":5.01,"y":"1.57"},{"x":5.015,"y":"1.58"},{"x":5.02,"y":"1.59"},{"x":5.025,"y":"1.59"},{"x":5.03,"y":"1.58"},{"x":5.035,"y":"1.56"},{"x":5.04,"y":"1.55"},{"x":5.045,"y":"1.54"},{"x":5.05,"y":"1.54"},{"x":5.055,"y":"1.55"},{"x":5.06,"y":"1.57"},{"x":5.065,"y":"1.58"},{"x":5.07,"y":"1.56"},{"x":5.075,"y":"1.52"},{"x":5.08,"y":"1.46"},{"x":5.085,"y":"1.39"},{"x":5.09,"y":"1.34"},{"x":5.095,"y":"1.35"},{"x":5.1,"y":"1.44"},{"x":5.105,"y":"1.62"},{"x":5.11,"y":"1.87"},{"x":5.115,"y":"2.17"},{"x":5.12,"y":"2.45"},{"x":5.125,"y":"2.66"},{"x":5.13,"y":"2.75"},{"x":5.135,"y":"2.69"},{"x":5.14,"y":"2.48"},{"x":5.145,"y":"2.19"},{"x":5.15,"y":"1.86"},{"x":5.155,"y":"1.57"},{"x":5.16,"y":"1.36"},{"x":5.165,"y":"1.26"},{"x":5.17,"y":"1.25"},{"x":5.175,"y":"1.30"},{"x":5.18,"y":"1.38"},{"x":5.185,"y":"1.44"},{"x":5.19,"y":"1.47"},{"x":5.195,"y":"1.48"},{"x":5.2,"y":"1.48"},{"x":5.205,"y":"1.47"},{"x":5.21,"y":"1.47"},{"x":5.215,"y":"1.48"},{"x":5.22,"y":"1.49"},{"x":5.225,"y":"1.50"},{"x":5.23,"y":"1.50"},{"x":5.235,"y":"1.50"},{"x":5.24,"y":"1.49"},{"x":5.245,"y":"1.48"},{"x":5.25,"y":"1.47"},{"x":5.255,"y":"1.48"},{"x":5.26,"y":"1.49"},{"x":5.265,"y":"1.51"},{"x":5.27,"y":"1.53"},{"x":5.275,"y":"1.55"},{"x":5.28,"y":"1.55"},{"x":5.285,"y":"1.54"},{"x":5.29,"y":"1.53"},{"x":5.295,"y":"1.52"},{"x":5.3,"y":"1.51"},{"x":5.305,"y":"1.51"},{"x":5.31,"y":"1.52"},{"x":5.315,"y":"1.55"},{"x":5.32,"y":"1.57"},{"x":5.325,"y":"1.59"},{"x":5.33,"y":"1.60"},{"x":5.335,"y":"1.60"},{"x":5.34,"y":"1.59"},{"x":5.345,"y":"1.58"},{"x":5.35,"y":"1.58"},{"x":5.355,"y":"1.59"},{"x":5.36,"y":"1.61"},{"x":5.365,"y":"1.64"},{"x":5.37,"y":"1.68"},{"x":5.375,"y":"1.72"},{"x":5.38,"y":"1.75"},{"x":5.385,"y":"1.77"},{"x":5.39,"y":"1.78"},{"x":5.395,"y":"1.78"},{"x":5.4,"y":"1.79"},{"x":5.405,"y":"1.80"},{"x":5.41,"y":"1.81"},{"x":5.415,"y":"1.84"},{"x":5.42,"y":"1.87"},{"x":5.425,"y":"1.89"},{"x":5.43,"y":"1.90"},{"x":5.435,"y":"1.90"},{"x":5.44,"y":"1.88"},{"x":5.445,"y":"1.86"},{"x":5.45,"y":"1.83"},{"x":5.455,"y":"1.80"},{"x":5.46,"y":"1.77"},{"x":5.465,"y":"1.76"},{"x":5.47,"y":"1.74"},{"x":5.475,"y":"1.73"},{"x":5.48,"y":"1.70"},{"x":5.485,"y":"1.67"},{"x":5.49,"y":"1.63"},{"x":5.495,"y":"1.59"},{"x":5.5,"y":"1.55"},{"x":5.505,"y":"1.53"},{"x":5.51,"y":"1.51"},{"x":5.515,"y":"1.52"},{"x":5.52,"y":"1.53"},{"x":5.525,"y":"1.55"},{"x":5.53,"y":"1.56"},{"x":5.535,"y":"1.56"},{"x":5.54,"y":"1.55"},{"x":5.545,"y":"1.54"},{"x":5.55,"y":"1.53"},{"x":5.555,"y":"1.52"},{"x":5.56,"y":"1.53"},{"x":5.565,"y":"1.54"},{"x":5.57,"y":"1.56"},{"x":5.575,"y":"1.59"},{"x":5.58,"y":"1.60"},{"x":5.585,"y":"1.61"},{"x":5.59,"y":"1.61"},{"x":5.595,"y":"1.59"},{"x":5.6,"y":"1.57"},{"x":5.605,"y":"1.56"},{"x":5.61,"y":"1.55"},{"x":5.615,"y":"1.56"},{"x":5.62,"y":"1.58"},{"x":5.625,"y":"1.60"},{"x":5.63,"y":"1.61"},{"x":5.635,"y":"1.62"},{"x":5.64,"y":"1.62"},{"x":5.645,"y":"1.61"},{"x":5.65,"y":"1.59"},{"x":5.655,"y":"1.58"},{"x":5.66,"y":"1.58"},{"x":5.665,"y":"1.59"},{"x":5.67,"y":"1.61"},{"x":5.675,"y":"1.63"},{"x":5.68,"y":"1.65"},{"x":5.685,"y":"1.66"},{"x":5.69,"y":"1.66"},{"x":5.695,"y":"1.65"},{"x":5.7,"y":"1.64"},{"x":5.705,"y":"1.63"},{"x":5.71,"y":"1.62"},{"x":5.715,"y":"1.63"},{"x":5.72,"y":"1.64"},{"x":5.725,"y":"1.66"},{"x":5.73,"y":"1.68"},{"x":5.735,"y":"1.69"},{"x":5.74,"y":"1.69"},{"x":5.745,"y":"1.67"},{"x":5.75,"y":"1.65"},{"x":5.755,"y":"1.63"},{"x":5.76,"y":"1.62"},{"x":5.765,"y":"1.62"},{"x":5.77,"y":"1.63"},{"x":5.775,"y":"1.65"},{"x":5.78,"y":"1.67"},{"x":5.785,"y":"1.68"},{"x":5.79,"y":"1.69"},{"x":5.795,"y":"1.67"},{"x":5.8,"y":"1.66"},{"x":5.805,"y":"1.64"},{"x":5.81,"y":"1.62"},{"x":5.815,"y":"1.62"},{"x":5.82,"y":"1.63"},{"x":5.825,"y":"1.64"},{"x":5.83,"y":"1.66"},{"x":5.835,"y":"1.68"},{"x":5.84,"y":"1.68"},{"x":5.845,"y":"1.67"},{"x":5.85,"y":"1.65"},{"x":5.855,"y":"1.63"},{"x":5.86,"y":"1.62"},{"x":5.865,"y":"1.61"},{"x":5.87,"y":"1.62"},{"x":5.875,"y":"1.64"},{"x":5.88,"y":"1.66"},{"x":5.885,"y":"1.67"},{"x":5.89,"y":"1.68"},{"x":5.895,"y":"1.67"},{"x":5.9,"y":"1.65"},{"x":5.905,"y":"1.63"},{"x":5.91,"y":"1.62"},{"x":5.915,"y":"1.61"},{"x":5.92,"y":"1.62"},{"x":5.925,"y":"1.63"},{"x":5.93,"y":"1.65"},{"x":5.935,"y":"1.67"},{"x":5.94,"y":"1.68"},{"x":5.945,"y":"1.68"},{"x":5.95,"y":"1.66"},{"x":5.955,"y":"1.64"},{"x":5.96,"y":"1.63"},{"x":5.965,"y":"1.62"},{"x":5.97,"y":"1.62"},{"x":5.975,"y":"1.63"},{"x":5.98,"y":"1.65"},{"x":5.985,"y":"1.67"},{"x":5.99,"y":"1.69"},{"x":5.995,"y":"1.69"},{"x":6,"y":"1.67"},{"x":6.005,"y":"1.64"},{"x":6.01,"y":"1.63"},{"x":6.015,"y":"1.62"},{"x":6.02,"y":"1.62"},{"x":6.025,"y":"1.63"},{"x":6.03,"y":"1.65"},{"x":6.035,"y":"1.66"},{"x":6.04,"y":"1.67"},{"x":6.045,"y":"1.66"},{"x":6.05,"y":"1.64"},{"x":6.055,"y":"1.62"},{"x":6.06,"y":"1.59"},{"x":6.065,"y":"1.57"},{"x":6.07,"y":"1.56"},{"x":6.075,"y":"1.56"},{"x":6.08,"y":"1.57"},{"x":6.085,"y":"1.58"},{"x":6.09,"y":"1.59"},{"x":6.095,"y":"1.59"},{"x":6.1,"y":"1.58"},{"x":6.105,"y":"1.57"},{"x":6.11,"y":"1.55"},{"x":6.115,"y":"1.53"},{"x":6.12,"y":"1.52"},{"x":6.125,"y":"1.53"},{"x":6.13,"y":"1.54"},{"x":6.135,"y":"1.56"},{"x":6.14,"y":"1.57"},{"x":6.145,"y":"1.58"},{"x":6.15,"y":"1.58"},{"x":6.155,"y":"1.57"},{"x":6.16,"y":"1.56"},{"x":6.165,"y":"1.54"},{"x":6.17,"y":"1.52"},{"x":6.175,"y":"1.50"},{"x":6.18,"y":"1.46"},{"x":6.185,"y":"1.42"},{"x":6.19,"y":"1.38"},{"x":6.195,"y":"1.36"},{"x":6.2,"y":"1.37"},{"x":6.205,"y":"1.46"},{"x":6.21,"y":"1.62"},{"x":6.215,"y":"1.85"},{"x":6.22,"y":"2.13"},{"x":6.225,"y":"2.42"},{"x":6.23,"y":"2.65"},{"x":6.235,"y":"2.78"},{"x":6.24,"y":"2.76"},{"x":6.245,"y":"2.59"},{"x":6.25,"y":"2.31"},{"x":6.255,"y":"1.97"},{"x":6.26,"y":"1.65"},{"x":6.265,"y":"1.40"},{"x":6.27,"y":"1.26"},{"x":6.275,"y":"1.22"},{"x":6.28,"y":"1.27"},{"x":6.285,"y":"1.35"},{"x":6.29,"y":"1.44"},{"x":6.295,"y":"1.50"},{"x":6.3,"y":"1.52"},{"x":6.305,"y":"1.51"},{"x":6.31,"y":"1.49"},{"x":6.315,"y":"1.46"},{"x":6.32,"y":"1.44"},{"x":6.325,"y":"1.44"},{"x":6.33,"y":"1.45"},{"x":6.335,"y":"1.47"},{"x":6.34,"y":"1.50"},{"x":6.345,"y":"1.52"},{"x":6.35,"y":"1.52"},{"x":6.355,"y":"1.52"},{"x":6.36,"y":"1.51"},{"x":6.365,"y":"1.49"},{"x":6.37,"y":"1.48"},{"x":6.375,"y":"1.48"},{"x":6.38,"y":"1.49"},{"x":6.385,"y":"1.51"},{"x":6.39,"y":"1.53"},{"x":6.395,"y":"1.55"},{"x":6.4,"y":"1.57"},{"x":6.405,"y":"1.57"},{"x":6.41,"y":"1.56"},{"x":6.415,"y":"1.55"},{"x":6.42,"y":"1.54"},{"x":6.425,"y":"1.54"},{"x":6.43,"y":"1.55"},{"x":6.435,"y":"1.58"},{"x":6.44,"y":"1.60"},{"x":6.445,"y":"1.63"},{"x":6.45,"y":"1.64"},{"x":6.455,"y":"1.65"},{"x":6.46,"y":"1.65"},{"x":6.465,"y":"1.64"},{"x":6.47,"y":"1.64"},{"x":6.475,"y":"1.64"},{"x":6.48,"y":"1.66"},{"x":6.485,"y":"1.69"},{"x":6.49,"y":"1.73"},{"x":6.495,"y":"1.76"},{"x":6.5,"y":"1.79"},{"x":6.505,"y":"1.81"},{"x":6.51,"y":"1.81"},{"x":6.515,"y":"1.81"},{"x":6.52,"y":"1.80"},{"x":6.525,"y":"1.80"},{"x":6.53,"y":"1.82"},{"x":6.535,"y":"1.83"},{"x":6.54,"y":"1.86"},{"x":6.545,"y":"1.87"},{"x":6.55,"y":"1.88"},{"x":6.555,"y":"1.87"},{"x":6.56,"y":"1.84"},{"x":6.565,"y":"1.80"},{"x":6.57,"y":"1.75"},{"x":6.575,"y":"1.70"},{"x":6.58,"y":"1.67"},{"x":6.585,"y":"1.65"},{"x":6.59,"y":"1.63"},{"x":6.595,"y":"1.62"},{"x":6.6,"y":"1.61"},{"x":6.605,"y":"1.60"},{"x":6.61,"y":"1.57"},{"x":6.615,"y":"1.54"},{"x":6.62,"y":"1.51"},{"x":6.625,"y":"1.49"},{"x":6.63,"y":"1.49"},{"x":6.635,"y":"1.49"},{"x":6.64,"y":"1.51"},{"x":6.645,"y":"1.53"},{"x":6.65,"y":"1.55"},{"x":6.655,"y":"1.57"},{"x":6.66,"y":"1.57"},{"x":6.665,"y":"1.56"},{"x":6.67,"y":"1.55"},{"x":6.675,"y":"1.54"},{"x":6.68,"y":"1.54"},{"x":6.685,"y":"1.55"},{"x":6.69,"y":"1.57"},{"x":6.695,"y":"1.59"},{"x":6.7,"y":"1.62"},{"x":6.705,"y":"1.63"},{"x":6.71,"y":"1.63"},{"x":6.715,"y":"1.62"},{"x":6.72,"y":"1.60"},{"x":6.725,"y":"1.59"},{"x":6.73,"y":"1.58"},{"x":6.735,"y":"1.59"},{"x":6.74,"y":"1.60"},{"x":6.745,"y":"1.62"},{"x":6.75,"y":"1.64"},{"x":6.755,"y":"1.65"},{"x":6.76,"y":"1.66"},{"x":6.765,"y":"1.65"},{"x":6.77,"y":"1.63"},{"x":6.775,"y":"1.62"},{"x":6.78,"y":"1.61"},{"x":6.785,"y":"1.61"},{"x":6.79,"y":"1.62"},{"x":6.795,"y":"1.64"},{"x":6.8,"y":"1.66"},{"x":6.805,"y":"1.67"},{"x":6.81,"y":"1.68"},{"x":6.815,"y":"1.67"},{"x":6.82,"y":"1.65"},{"x":6.825,"y":"1.63"},{"x":6.83,"y":"1.62"},{"x":6.835,"y":"1.62"},{"x":6.84,"y":"1.63"},{"x":6.845,"y":"1.65"},{"x":6.85,"y":"1.67"},{"x":6.855,"y":"1.68"},{"x":6.86,"y":"1.68"},{"x":6.865,"y":"1.67"},{"x":6.87,"y":"1.66"},{"x":6.875,"y":"1.64"},{"x":6.88,"y":"1.62"},{"x":6.885,"y":"1.62"},{"x":6.89,"y":"1.63"},{"x":6.895,"y":"1.65"},{"x":6.9,"y":"1.67"},{"x":6.905,"y":"1.68"},{"x":6.91,"y":"1.69"},{"x":6.915,"y":"1.68"},{"x":6.92,"y":"1.66"},{"x":6.925,"y":"1.64"},{"x":6.93,"y":"1.63"},{"x":6.935,"y":"1.62"},{"x":6.94,"y":"1.62"},{"x":6.945,"y":"1.64"},{"x":6.95,"y":"1.66"},{"x":6.955,"y":"1.67"},{"x":6.96,"y":"1.68"},{"x":6.965,"y":"1.68"},{"x":6.97,"y":"1.67"},{"x":6.975,"y":"1.65"},{"x":6.98,"y":"1.63"},{"x":6.985,"y":"1.62"},{"x":6.99,"y":"1.62"},{"x":6.995,"y":"1.63"},{"x":7,"y":"1.66"},{"x":7.005,"y":"1.68"},{"x":7.01,"y":"1.68"},{"x":7.015,"y":"1.68"},{"x":7.02,"y":"1.66"},{"x":7.025,"y":"1.64"},{"x":7.03,"y":"1.62"},{"x":7.035,"y":"1.61"},{"x":7.04,"y":"1.61"},{"x":7.045,"y":"1.62"},{"x":7.05,"y":"1.64"},{"x":7.055,"y":"1.66"},{"x":7.06,"y":"1.67"},{"x":7.065,"y":"1.67"},{"x":7.07,"y":"1.65"},{"x":7.075,"y":"1.64"},{"x":7.08,"y":"1.62"},{"x":7.085,"y":"1.61"},{"x":7.09,"y":"1.61"},{"x":7.095,"y":"1.62"},{"x":7.1,"y":"1.64"},{"x":7.105,"y":"1.66"},{"x":7.11,"y":"1.67"},{"x":7.115,"y":"1.67"},{"x":7.12,"y":"1.66"},{"x":7.125,"y":"1.65"},{"x":7.13,"y":"1.63"},{"x":7.135,"y":"1.61"},{"x":7.14,"y":"1.61"},{"x":7.145,"y":"1.61"},{"x":7.15,"y":"1.62"},{"x":7.155,"y":"1.64"},{"x":7.16,"y":"1.65"},{"x":7.165,"y":"1.64"},{"x":7.17,"y":"1.63"},{"x":7.175,"y":"1.61"},{"x":7.18,"y":"1.59"},{"x":7.185,"y":"1.57"},{"x":7.19,"y":"1.56"},{"x":7.195,"y":"1.56"},{"x":7.2,"y":"1.57"},{"x":7.205,"y":"1.58"},{"x":7.21,"y":"1.59"},{"x":7.215,"y":"1.59"},{"x":7.22,"y":"1.59"},{"x":7.225,"y":"1.57"},{"x":7.23,"y":"1.55"},{"x":7.235,"y":"1.53"},{"x":7.24,"y":"1.52"},{"x":7.245,"y":"1.52"},{"x":7.25,"y":"1.54"},{"x":7.255,"y":"1.56"},{"x":7.26,"y":"1.58"},{"x":7.265,"y":"1.59"},{"x":7.27,"y":"1.59"},{"x":7.275,"y":"1.58"},{"x":7.28,"y":"1.55"},{"x":7.285,"y":"1.51"},{"x":7.29,"y":"1.45"},{"x":7.295,"y":"1.39"},{"x":7.3,"y":"1.34"},{"x":7.305,"y":"1.31"},{"x":7.31,"y":"1.32"},{"x":7.315,"y":"1.40"},{"x":7.32,"y":"1.55"},{"x":7.325,"y":"1.77"},{"x":7.33,"y":"2.04"},{"x":7.335,"y":"2.34"},{"x":7.34,"y":"2.60"},{"x":7.345,"y":"2.77"},{"x":7.35,"y":"2.81"},{"x":7.355,"y":"2.71"},{"x":7.36,"y":"2.49"},{"x":7.365,"y":"2.18"},{"x":7.37,"y":"1.84"},{"x":7.375,"y":"1.55"},{"x":7.38,"y":"1.35"},{"x":7.385,"y":"1.24"},{"x":7.39,"y":"1.23"},{"x":7.395,"y":"1.27"},{"x":7.4,"y":"1.35"},{"x":7.405,"y":"1.42"},{"x":7.41,"y":"1.48"},{"x":7.415,"y":"1.51"},{"x":7.42,"y":"1.51"},{"x":7.425,"y":"1.49"},{"x":7.43,"y":"1.47"},{"x":7.435,"y":"1.44"},{"x":7.44,"y":"1.43"},{"x":7.445,"y":"1.43"},{"x":7.45,"y":"1.44"},{"x":7.455,"y":"1.46"},{"x":7.46,"y":"1.49"},{"x":7.465,"y":"1.51"},{"x":7.47,"y":"1.52"},{"x":7.475,"y":"1.52"},{"x":7.48,"y":"1.51"},{"x":7.485,"y":"1.50"},{"x":7.49,"y":"1.49"},{"x":7.495,"y":"1.48"},{"x":7.5,"y":"1.49"},{"x":7.505,"y":"1.51"},{"x":7.51,"y":"1.53"},{"x":7.515,"y":"1.56"},{"x":7.52,"y":"1.57"},{"x":7.525,"y":"1.58"},{"x":7.53,"y":"1.57"},{"x":7.535,"y":"1.56"},{"x":7.54,"y":"1.55"},{"x":7.545,"y":"1.55"},{"x":7.55,"y":"1.56"},{"x":7.555,"y":"1.58"},{"x":7.56,"y":"1.61"},{"x":7.565,"y":"1.64"},{"x":7.57,"y":"1.66"},{"x":7.575,"y":"1.67"},{"x":7.58,"y":"1.67"},{"x":7.585,"y":"1.67"},{"x":7.59,"y":"1.67"},{"x":7.595,"y":"1.67"},{"x":7.6,"y":"1.69"},{"x":7.605,"y":"1.71"},{"x":7.61,"y":"1.75"},{"x":7.615,"y":"1.78"},{"x":7.62,"y":"1.81"},{"x":7.625,"y":"1.83"},{"x":7.63,"y":"1.84"},{"x":7.635,"y":"1.84"},{"x":7.64,"y":"1.83"},{"x":7.645,"y":"1.82"},{"x":7.65,"y":"1.82"},{"x":7.655,"y":"1.83"},{"x":7.66,"y":"1.85"},{"x":7.665,"y":"1.86"},{"x":7.67,"y":"1.85"},{"x":7.675,"y":"1.84"},{"x":7.68,"y":"1.80"},{"x":7.685,"y":"1.76"},{"x":7.69,"y":"1.71"},{"x":7.695,"y":"1.66"},{"x":7.7,"y":"1.62"},{"x":7.705,"y":"1.60"},{"x":7.71,"y":"1.59"},{"x":7.715,"y":"1.59"},{"x":7.72,"y":"1.59"},{"x":7.725,"y":"1.58"},{"x":7.73,"y":"1.57"},{"x":7.735,"y":"1.55"},{"x":7.74,"y":"1.52"},{"x":7.745,"y":"1.50"},{"x":7.75,"y":"1.50"},{"x":7.755,"y":"1.50"},{"x":7.76,"y":"1.52"},{"x":7.765,"y":"1.54"},{"x":7.77,"y":"1.56"},{"x":7.775,"y":"1.58"},{"x":7.78,"y":"1.58"},{"x":7.785,"y":"1.58"},{"x":7.79,"y":"1.56"},{"x":7.795,"y":"1.55"},{"x":7.8,"y":"1.55"},{"x":7.805,"y":"1.55"},{"x":7.81,"y":"1.57"},{"x":7.815,"y":"1.59"},{"x":7.82,"y":"1.61"},{"x":7.825,"y":"1.63"},{"x":7.83,"y":"1.63"},{"x":7.835,"y":"1.62"},{"x":7.84,"y":"1.61"},{"x":7.845,"y":"1.59"},{"x":7.85,"y":"1.58"},{"x":7.855,"y":"1.58"},{"x":7.86,"y":"1.60"},{"x":7.865,"y":"1.62"},{"x":7.87,"y":"1.64"},{"x":7.875,"y":"1.65"},{"x":7.88,"y":"1.66"},{"x":7.885,"y":"1.65"},{"x":7.89,"y":"1.64"},{"x":7.895,"y":"1.62"},{"x":7.9,"y":"1.61"},{"x":7.905,"y":"1.61"},{"x":7.91,"y":"1.62"},{"x":7.915,"y":"1.63"}]`)
  }

  ngOnInitAsync(): void {
    // this.chartWidth = this.chartContainer.nativeElement.offsetWidth
    // this.chartHeight = this.chartContainer.nativeElement.parentElement.parentElement.offsetHeight
    this.createChart()
    // this.chart.resize(this.chartWidth, this.chartHeight)
  }


  ngOnChanges(changes: SimpleChanges): void {
    if (this.chart) {
      this.chart.data.datasets[0].data = this.data
      this.chart.update()
    }
  }

  createChart() {
    Chart.register(...registerables);
    Chart.register(annotationPlugin);

    const data = {
      datasets: [
        {
          label: 'Dataset 1',
          data: this.data,
          showLine: true,
          fill: false,
          borderColor: 'rgba(0, 200, 0, 1)'
        }
      ]
    };

    const options = {
      responsive: true,
      layout: {
        width: this.chartWidth,
        height: this.chartHeight,
      },
      plugins: {
        legend: {
          display: false
        },
        title: {
          display: false,
          text: ''
        },
        tooltip: {
          enabled: false
        },
        hover: {
          mode: null
        },
        annotation: {
          clip: false,
          annotations: this.generateLines()
        }
      },
      scales: {
        x: {
          min: this.minElementsX,
          max: this.maxElementsX,
          ticks: {
            display: false,
            stepSize: 0.04
          },
          grid: {
            display: true,
            drawTicks: false,
            color: this.gridLineLight,
          }
        },
        y: {
          min: this.minElementsY,
          max: this.maxElementsY,
          ticks: {
            display: false,
          },
          grid: {
            display: true,
            drawTicks: false
          }
        }
      },
      elements: {
        point: {
          radius: 0
        }
      }
    };


    this.chart = new Chart("ecgChart", {
      type: 'scatter',
      data: data,
      options: options as any
    });
  }


  private generateLines(): any {

    //Lineas fijas predefinidas
    let lines = {
      topLine: {
        display: true,
        drawTime: 'beforeDraw',
        type: 'line',
        borderColor: this.gridLineStrong,
        borderWidth: 1,
        value: this.maxElementsY,
        scaleID: 'y',
      },
      bottomLine: {
        display: true,
        drawTime: 'beforeDraw',
        type: 'line',
        borderColor: this.gridLineStrong,
        borderWidth: 1,
        value: this.minElementsY,
        scaleID: 'y',
      },
      startLine: {
        display: true,
        drawTime: 'beforeDraw',
        type: 'line',
        borderColor: this.gridLineStrong,
        borderWidth: 1,
        value: this.minElementsX,
        scaleID: 'x',
      },
      endLine: {
        display: true,
        drawTime: 'beforeDraw',
        type: 'line',
        borderColor: this.gridLineStrong,
        borderWidth: 1,
        value: this.maxElementsX,
        scaleID: 'x',
      },
    };

    // Genera las lineas horizontale y las a単ade al objeto final que las contiene
    for (let index = 0; index < this.maxElementsX * 5; index++) {
      lines = Object.assign(lines, { ['h_' + index]: this.buildHorizontalLine(index) })
    }


    // Genera las lineas verticales y las a単ade al objeto final que las contiene
    for (let index = this.minElementsY; index < this.maxElementsY * 10; index++) {
      lines = Object.assign(lines, { ['v_' + index]: this.buildVerticalLine(index) })
    }

    return lines
  }

  /**
   * Crea las lineas horizontales automaticamente cada 0.2 unidades asignando el color correspondiente
   * @param index Indice de la linea a crear
   * @returns Objeto para a単adir a annotations
   */
  private buildHorizontalLine(index: number): any {
    let strong: boolean = (index + 1) % 5 === 0;
    let value = 0.2 + (0.2 * index);

    return {
      display: true,
      drawTime: 'beforeDraw',
      type: 'line',
      borderColor: strong ? this.gridLineStrong : this.gridLineMedium,
      borderWidth: 1,
      value: value.toFixed(1),
      scaleID: 'x',
    }
  }

  /**
   * Crea las lineas verticales automaticamente cada 0.2 unidades asignando el color correspondiente
   * @param index Indice de la linea a crear
   * @returns Objeto para a単adir a annotations
   */
  private buildVerticalLine(index: number): any {
    let strong: boolean = (index + 1) % 5 === 0;
    let value = 0.1 + (0.1 * index);

    return {
      display: true,
      drawTime: 'beforeDraw',
      type: 'line',
      borderColor: strong ? this.gridLineStrong : this.gridLineMedium,
      borderWidth: 1,
      value: value.toFixed(1),
      scaleID: 'y',
    }
  }


}


